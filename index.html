<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <title>Ridwan Bayrajee | Portfolio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="assets/css/morph.css?v=20251002"/>
  <style>
    :root[data-theme="light"]{
      --grad:linear-gradient(135deg, #e0f7fa 0%, #bbdefb 100%);
    }
    :root[data-theme="dark"]{
      --grad:linear-gradient(135deg, #0d1b2a 0%, #1b263b 100%);
    }
    .hero{
      background:var(--grad);
      padding:4rem 1rem 3rem;
      border-radius:16px;
      margin-bottom:2rem;
      text-align:center;
    }
    .hero h1{font-size:2.6rem;margin-bottom:.5rem;}
    .tag-line{
      max-width:700px;margin:auto;
      text-align:justify;text-justify:inter-word;
      font-size:1.05rem;line-height:1.7;
    }
    .glass{
      background:rgba(255,255,255,.08);
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,.15);
      border-radius:12px;
      padding:1.2rem;
      transition:transform .25s;
    }
    .glass:hover{transform:translateY(-4px);}
    .counter{font-size:2rem;font-weight:700;color:var(--acc);}
    .edu-card{margin-top:1.5rem;}
    .animate{opacity:0;transform:translateY(20px);transition:all .6s ease-out;}
    .animate.show{opacity:1;transform:translateY(0);}
  </style>
</head>
<body>
<nav>
  <a href="#home" data-page="home">Home</a>
  <a href="#exp"  data-page="exp">Experience</a>
  <a href="#proj" data-page="proj">Projects</a>
  <a href="#lead" data-page="lead">Leadership</a>
  <a href="#skill" data-page="skill">Skills&nbsp;&amp;&nbsp;Certs</a>
  <a href="#contact" data-page="contact">Contact</a>
  <button id="themeToggle">ðŸŒ—</button>
</nav>

<main id="morphRoot" class="morph-container"></main>

<script>
/* ---------- router + morph ---------- */
const root  = document.getElementById('morphRoot');
const cache = {};
let io; // intersection observer

async function loadPage(name){
  if(cache[name]) return morph(cache[name]);
  const res  = await fetch(`pages/${name}.html?v=20251002`); // cache-busting
  const html = await res.text();
  cache[name]= html;
  morph(html);
}

function morph(newHTML){
  root.style.opacity = 0;
  setTimeout(()=>{
    root.innerHTML = newHTML;
    root.style.opacity = 1;
    if(root.querySelector('.counter')) animateCounters();
    attachAnimations();
    attachExpToggles(); 
    if(location.hash.includes("skill")) attachSkillHighlights(); // hook for skills page
  },250);
}

/* ---------- navigation ---------- */
window.addEventListener('hashchange', ()=> loadPage(location.hash.slice(1)||'home'));
loadPage('home'); // initial load

/* ---------- dark mode ---------- */
const btn = document.getElementById('themeToggle');
btn.onclick = ()=>{
  const html = document.documentElement;
  html.dataset.theme = html.dataset.theme === 'light' ? 'dark' : 'light';
  localStorage.setItem('theme', html.dataset.theme);
};
if(localStorage.theme) document.documentElement.dataset.theme = localStorage.theme;

/* ---------- counter animation ---------- */
function animateCounters(){
  const counters = document.querySelectorAll('.counter');
  counters.forEach(el=>{
    const target = +el.dataset.target;
    const inc = target / 60; let curr = 0;
    const tick = ()=>{
      curr += inc;
      if(curr < target) { el.textContent = Math.floor(curr); requestAnimationFrame(tick); }
      else el.textContent = target;
    };
    tick();
  });
}

/* ---------- scroll animations ---------- */
function attachAnimations(){
  if(io) io.disconnect();
  io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('show'); });
  }, {threshold:.3});
  root.querySelectorAll('.animate').forEach(el=>io.observe(el));
}

/* ---------- experience toggles ---------- */
function attachExpToggles(){
  root.querySelectorAll('.exp-card').forEach(card=>{
    const btn = card.querySelector('.toggle-btn');
    if(btn){
      btn.addEventListener('click', ()=>{
        card.classList.toggle('expanded');
        btn.textContent = card.classList.contains('expanded') ? 'Collapse â–²' : 'Expand â–¼';
      });
    }
  });
}

/* ---------- skills highlight ---------- */
function attachSkillHighlights(){
  const certSkillMap = {
    "AI Chat Prompts for Business Analysis": [
      "AI for Business Analysis", "Prompt Engineering", "Business Development"
    ],
    "Building a Personalized Chatbot with OpenAI & LangChain": [
      "LangChain", "Chatbot Development", "OpenAI Products"
    ]
  };

  root.querySelectorAll(".cert-chip").forEach(cert=>{
    cert.addEventListener("mouseenter", ()=>{
      const certName = cert.dataset.cert;
      cert.classList.add("highlight");
      if(certSkillMap[certName]){
        certSkillMap[certName].forEach(skillName=>{
          root.querySelectorAll(".skill-chip").forEach(s=>{
            if(s.textContent.trim() === skillName){
              s.classList.add("skill-highlight");
            }
          });
        });
      }
    });
    cert.addEventListener("mouseleave", ()=>{
      const certName = cert.dataset.cert;
      cert.classList.remove("highlight");
      if(certSkillMap[certName]){
        certSkillMap[certName].forEach(skillName=>{
          root.querySelectorAll(".skill-chip").forEach(s=>{
            if(s.textContent.trim() === skillName){
              s.classList.remove("skill-highlight");
            }
          });
        });
      }
    });
  });
}
</script>
</body>
</html>
